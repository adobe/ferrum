<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Trait - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="wrap">
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="HybridWeakMap.html">HybridWeakMap</a></li><li><a href="Trait_.html">Trait</a><ul class='methods'><li data-type='method'><a href="Trait_.html#lookupValue">lookupValue</a></li><li data-type='method'><a href="Trait_.html#lookupType">lookupType</a></li><li data-type='method'><a href="Trait_.html#invoke">invoke</a></li><li data-type='method'><a href="Trait_.html#impl">impl</a></li><li data-type='method'><a href="Trait_.html#implStatic">implStatic</a></li><li data-type='method'><a href="Trait_.html#implDerived">implDerived</a></li><li data-type='method'><a href="Trait_.html#implWild">implWild</a></li><li data-type='method'><a href="Trait_.html#implWildStatic">implWildStatic</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-functional.html">functional</a><ul class='methods'><li data-type='method'><a href="module-functional.html#~exec">exec</a></li><li data-type='method'><a href="module-functional.html#~identity">identity</a></li><li data-type='method'><a href="module-functional.html#~pipe">pipe</a></li><li data-type='method'><a href="module-functional.html#~compose">compose</a></li><li data-type='method'><a href="module-functional.html#~withFunctionName">withFunctionName</a></li><li data-type='method'><a href="module-functional.html#~curry">curry</a></li></ul></li><li><a href="module-op.html">op</a><ul class='methods'><li data-type='method'><a href="module-op.html#~and">and</a></li><li data-type='method'><a href="module-op.html#~or">or</a></li><li data-type='method'><a href="module-op.html#~not">not</a></li><li data-type='method'><a href="module-op.html#~nand">nand</a></li><li data-type='method'><a href="module-op.html#~nor">nor</a></li><li data-type='method'><a href="module-op.html#~xor">xor</a></li><li data-type='method'><a href="module-op.html#~xnor">xnor</a></li><li data-type='method'><a href="module-op.html#~is">is</a></li><li data-type='method'><a href="module-op.html#~aint">aint</a></li><li data-type='method'><a href="module-op.html#~plus">plus</a></li><li data-type='method'><a href="module-op.html#~mul">mul</a></li></ul></li><li><a href="module-seqeuence.html">seqeuence</a><ul class='methods'><li data-type='method'><a href="module-seqeuence.html#~iter">iter</a></li><li data-type='method'><a href="module-seqeuence.html#~range">range</a></li><li data-type='method'><a href="module-seqeuence.html#~range0">range0</a></li><li data-type='method'><a href="module-seqeuence.html#~repeat">repeat</a></li><li data-type='method'><a href="module-seqeuence.html#~next">next</a></li><li data-type='method'><a href="module-seqeuence.html#~first">first</a></li><li data-type='method'><a href="module-seqeuence.html#~second">second</a></li><li data-type='method'><a href="module-seqeuence.html#~seqEq">seqEq</a></li><li data-type='method'><a href="module-seqeuence.html#~count">count</a></li><li data-type='method'><a href="module-seqeuence.html#~list">list</a></li><li data-type='method'><a href="module-seqeuence.html#~uniq">uniq</a></li><li data-type='method'><a href="module-seqeuence.html#~dict">dict</a></li><li data-type='method'><a href="module-seqeuence.html#~obj">obj</a></li><li data-type='method'><a href="module-seqeuence.html#~any">any</a></li><li data-type='method'><a href="module-seqeuence.html#~all">all</a></li><li data-type='method'><a href="module-seqeuence.html#~sum">sum</a></li><li data-type='method'><a href="module-seqeuence.html#~product">product</a></li><li data-type='method'><a href="module-seqeuence.html#~reverse">reverse</a></li><li data-type='method'><a href="module-seqeuence.html#~enumerate">enumerate</a></li><li data-type='method'><a href="module-seqeuence.html#~takeDef">takeDef</a></li><li data-type='method'><a href="module-seqeuence.html#~flat">flat</a></li><li data-type='method'><a href="module-seqeuence.html#~concat">concat</a></li><li data-type='method'><a href="module-seqeuence.html#~zipLeast">zipLeast</a></li><li data-type='method'><a href="module-seqeuence.html#~zip">zip</a></li><li data-type='method'><a href="module-seqeuence.html#~union">union</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="trait.html">trait</a></li></ul><h3>Interfaces</h3><ul><li><a href="module-seqeuence-Sequence.html">Sequence</a></li><li><a href="module-seqeuence-Into.html">Into</a></li><li><a href="Immutable.html">Immutable</a></li><li><a href="Equals.html">Equals</a></li><li><a href="Size.html">Size</a></li><li><a href="Shallowclone.html">Shallowclone</a></li><li><a href="Deepclone.html">Deepclone</a></li><li><a href="Pairs.html">Pairs</a></li><li><a href="Get.html">Get</a></li><li><a href="Has.html">Has</a></li><li><a href="Assign.html">Assign</a></li><li><a href="Delete.html">Delete</a></li><li><a href="Setdefault.html">Setdefault</a></li><li><a href="Replace.html">Replace</a></li></ul><h3>Global</h3><ul><li><a href="global.html#typedArrays">typedArrays</a></li><li><a href="global.html#isdef">isdef</a></li><li><a href="global.html#type">type</a></li><li><a href="global.html#typename">typename</a></li><li><a href="global.html#isPrimitive">isPrimitive</a></li><li><a href="global.html#supports">supports</a></li><li><a href="global.html#valueSupports">valueSupports</a></li><li><a href="global.html#typeIsImmutable">typeIsImmutable</a></li><li><a href="global.html#isImmutable">isImmutable</a></li><li><a href="global.html#eq">eq</a></li><li><a href="global.html#uneq">uneq</a></li><li><a href="global.html#assertEquals">assertEquals</a></li><li><a href="global.html#assertUneq">assertUneq</a></li><li><a href="global.html#size">size</a></li><li><a href="global.html#empty">empty</a></li><li><a href="global.html#shallowclone">shallowclone</a></li><li><a href="global.html#deepclone">deepclone</a></li><li><a href="global.html#pairs">pairs</a></li><li><a href="global.html#keys">keys</a></li><li><a href="global.html#values">values</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#has">has</a></li><li><a href="global.html#assign">assign</a></li><li><a href="global.html#del">del</a></li><li><a href="global.html#setdefault">setdefault</a></li><li><a href="global.html#replace">replace</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Trait</h1>
    

    




<section>

<header>
    
        <h2>
        Trait
        </h2>
        
            <div class="class-description usertext"><p>Helper for implementing generic functions/protocols.</p>
<pre class="prettyprint source"><code>// Declaring a trait
const Size = new Trait('Size');

// Using it
const size = (what) => Size.invoke(what);
const empty = (what) => size(what) === 0;

// Providing implementations for own types
class MyType {
  [Size.sym]() {
    return 42;
  }
}

// Providing implementations for third party types
Size.impl(Array, (x) => x.length); // Method of type Array
Size.impl(String, (x) => x.length);
Size.impl(Map, (x) => x.size);
Size.impl(Set, (x) => x.size);

Size.impl(Object, (x) => { // Note that this won't apply to subclasses
  let cnt = 0;
  for (const _ in x) cnt++;
  return cnt;
});

// Note: The two following examples would be a bad idea in reality,
// they are just here toshow the mechanism
Size.implStatic(null, (_) => 0); // Static implementation (for a value and not a type)

// This implementation will be used if the underlying type/value
// implements the magnitude trait
Size.implDerived([Magnitued], ([magnitude], v) => magnitude(v));

// This will be called as a last resort, so this must be very fast!
// This example would implement the `size` trait for any even number.
// Note how we just return `undefined` for non even numbers
Size.implWildStatic(
   (x) => type(x) === Number && x % 2 == 0 ? (x => x) : undefined);

// test if an object is a dom node
const isNode = o =>
    typeof Node === &quot;object&quot;
       ? o instanceof Node
       : o && typeof o === &quot;object&quot;
           && typeof o.nodeType === &quot;number&quot;
           && typeof o.nodeName===&quot;string&quot;;

// Last resort lookup for types. Implements Size for any dom nodes…
Size.implWild(
   (t) => isNodeType(t) ? ((elm) => elm.childElementCount) : undefined);


// Using all the implementations
size([1,2,3]) # => 3
size({foo: 42}) # => 1
size(new Set([1,2,3])) # => 3
size(new MyType()) # => 42
size(null) # => 0
size(document.body) # => 1
</code></pre>
<h1>Traits, an introduction: Very specific interfaces that let you choose your guarantees</h1>
<p>This helps to implement a concept known as type classes in haskell,
traits in rust, protocols in elixir, protocols (like the iteration protocol)
in javascript.
This helper is not supposed to replace ES6 protocols, instead it is supposed
to expand on them and make them more powerfull.</p>
<p>Basically this allows you to declare an interface, similar to interfaces in
C++ or C# or Java. You declare the interface; anyone implementing this generic
interface (like the iterator protocol, or Size interface which can be used to
determine the size of a container) promises to obey the rules and the laws of
the interface.
This is much more specific than having a size() method for instance; size() is
just an name which might be reasonably used in multiple circumstances; e.g. one
might use the name size() for a container that can have a <code>null</code> size, or return
a tuple of two numbers because the size is two dimensional. Or it might require
io to return the size or be complex to compute (e.g. in a linked list).</p>
<p>A size() method may do a lot of things, the Size trait however has a highly specific
definition: It returns the size of a container, as a Number which must be greater than
zero and cannot be null. The size must be efficient to compute as well.</p>
<p>By using the Size trait, the developer providing an implementation specifically says
'I obey those rules'. There may even be a second trait called <code>Size</code> with it's own rules.
The trait class is written in a way so those two would not interfere.</p>
<h2>Traits do not provide type checks</h2>
<p>Because we are in javascript, these guarantees are generally not enforced by the type system
and the dev providing an implementation is still responsible for writing extensive tests.</p>
<h1>Traits provide abstraction: Think about what you want to do, not how you want to do it</h1>
<p>One specific feature traits provide is that they let you state what you want to do instead of how
to do it.
Need to determine the size of a container? Use <code>.length</code> for arrays and strings,
use <code>.size</code> for ES6 Maps and Sets and a for loop to determine the size of an object.
Or you could just use the Size trait and call <code>size(thing)</code> which works for all of these
types. This is one of the features traits provide; define an implementation for a trait
once and you no longer have to think about how to achieve a thing, just what to achieve.</p>
<h1>Implementing traits for third party types</h1>
<p>This is another feature that makes traits particularly useful! Java for instance
has interfaces, but the creator of a class/type must think of implementing a specific interface;
this is particularly problematic if the type is from a library; the interface must
either come from the standard library or from that particular library.</p>
<p>This usually is not very helpful; with traits this is not a problem at all.
Just use <code>MyTrait.impl</code> as in the example above.</p>
<h1>Subclassing the Trait class</h1>
<p>You may subclass Trait and overwrite any of it's methods.</p></div>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="Trait"><span class="type-signature"></span>new Trait<span class="signature">(name, sym)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="types.js.html">types.js</a>, <a href="types.js.html#line300">line 300</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>















    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the trait</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sym</code></td>
            

            <td class="type">
            
                
<span class="param-type">Symbol</span>
|

<span class="param-type">null</span>


            
            </td>

            

            

            <td class="description last"><p>Sym­bol as­so­ci­ated with the trait; this sym­bol
will be avail­able un­der <code>MyTrait.sym</code> for devs to im­ple­ment their
in­ter­faces with. This para­meter is usu­ally left empty; in this case a
new sym­bol is cre­ated for the trait. An ex­ample where the ex­tra
para­meter is used is the <code>Se­quence</code> trait in <code>se­quence.js</code>; this trait
is just a wrap­per around the built in <code>Sym­bol.iter­ator</code> pro­tocol, so
it's us­ing it's sym­bol.</p></td>
        </tr>

    
    </tbody>
</table>



















        
        </div>
    

    

    

    
    
    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="lookupValue"><span class="type-signature"></span>lookupValue<span class="signature">(what)</span><span class="type-signature"> &rarr; {function|falsy-value}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="types.js.html">types.js</a>, <a href="types.js.html#line341">line 341</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Find the im­ple­ment­a­tion of this trait for a spe­cific value.
This is used by <code>.in­voke()</code>, <code>.sup­ports()</code> and <code>.val­ue­Sup­ports</code>.</p>
<p>It uses the fol­low­ing pre­ced­ence by de­fault:</p>
<ul>
<li>Im­ple­ment­a­tions ad­ded with <code>im­pl­Static</code></li>
<li>Im­ple­ment­a­tions us­ing the sym­bol in a method of a pro­to­type</li>
<li>Im­ple­ment­a­tions ad­ded with <code>impl</code></li>
<li>Im­ple­ment­a­tions ad­ded with <code>im­plDe­rived</code> in the or­der they where ad­ded</li>
<li>Im­ple­ment­a­tions ad­ded with <code>im­pl­Wild</code> in the or­der…</li>
<li>Im­ple­ment­a­tions ad­ded with <code>im­pl­Wild­Static</code> in the or­der…</li>
</ul>
<p>This func­tion can be used dir­ectly in or­der to avoid a double look­iup
of the im­ple­ment­a­tion:</p>
<pre class="prettyprint source"><code>const impl = MyTrait.look­up­Value(what);
if (impl) {
  impl(what, ...);
} else {
  ...
}
</code></pre>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>what</code></td>
            

            <td class="type">
            
                
<span class="param-type">Any</span>


            
            </td>

            

            

            <td class="description last"><p>The thing to find an im­ple­ment­a­tion for</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The func­tion that was found or noth­ing.
Takes the same para­met­ers as <code>.in­voke(what, ...args)</code>, so if you are not
us­ing in­voke, you must spe­cify <code>what</code> twice; once in the <code>look­up­Value</code> call, once
in the in­voc­a­tion.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>
|

<span class="param-type">falsy-value</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="lookupType"><span class="type-signature"></span>lookupType<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="types.js.html">types.js</a>, <a href="types.js.html#line372">line 372</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Lookup the im­ple­ment­a­tion of this trait for a spe­cific type.
Pretty much the same as look­up­Value, just skips the value lookup steps…</p>
</div>




























        
            

    

    <h4 class="name" id="invoke"><span class="type-signature"></span>invoke<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="types.js.html">types.js</a>, <a href="types.js.html#line444">line 444</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>In­voke the im­ple­ment­a­tion. See ex­amples above.</p>
</div>




























        
            

    

    <h4 class="name" id="impl"><span class="type-signature"></span>impl<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="types.js.html">types.js</a>, <a href="types.js.html#line456">line 456</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Im­ple­ment this trait for a class as a 'meth­od'. See ex­amples above</p>
</div>




























        
            

    

    <h4 class="name" id="implStatic"><span class="type-signature"></span>implStatic<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="types.js.html">types.js</a>, <a href="types.js.html#line465">line 465</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Im­ple­ment this trait for a value/​as a 'static meth­od'. See ex­amples above
Prefer impl() when pos­sible since im­ple­ment­a­tions us­ing this func­tion will
not show up in sup­ports()/​this.type­HasImpl().</p>
</div>




























        
            

    

    <h4 class="name" id="implDerived"><span class="type-signature"></span>implDerived<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="types.js.html">types.js</a>, <a href="types.js.html#line470">line 470</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Im­ple­ments a trait based on other traits</p>
</div>




























        
            

    

    <h4 class="name" id="implWild"><span class="type-signature"></span>implWild<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="types.js.html">types.js</a>, <a href="types.js.html#line479">line 479</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Ar­bit­rary code im­ple­ment­a­tion of this trait for types. See ex­amples above
Prefer im­pl­Wild() when pos­sible since im­ple­ment­a­tions us­ing this func­tion will
not show up in sup­ports()/​this.type­HasImpl().</p>
</div>




























        
            

    

    <h4 class="name" id="implWildStatic"><span class="type-signature"></span>implWildStatic<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="types.js.html">types.js</a>, <a href="types.js.html#line484">line 484</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Ar­bit­rary code im­ple­ment­a­tion of this trait for val­ues. See ex­amples above</p>
</div>




























        
    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.2</a> on Thu May 30 2019 15:51:22 GMT+0200 (Central European Summer Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>